# 局部变量

在某些情况下，您处理的数据无法映射到寄存器，要么是因为它需要在内存中是线性的（考虑结构体和数组），要么是因为它太大而无法适应可用的寄存器。

虽然您可以求助于动态内存分配，例如通过调用外部函数 `malloc` 等，但对于固定大小的临时变量有一个更好的方法：*函数局部存储*。

局部存储可以通过 `sljit_emit_enter` 的最后一个参数以字节为单位请求，在之前的示例中该参数总是零。在底层，SLJIT 将在函数的栈帧中分配请求的数量作为连续的内存块。

由于其本质上无栈的 API，SLJIT 向您隐藏了大部分这些实现细节。有两种方式访问这些局部数据：

- 特殊寄存器 `SLJIT_SP` 充当指向局部数据基址的指针。它*只能*以 `SLJIT_MEM1(SLJIT_SP)` 的形式使用来访问偏移量处的局部数据。
- 如果您需要实际地址，您可以使用 `sljit_get_local_base`。例如，`sljit_get_local_base(C, SLJIT_R0, 0, 0x40)` 将加载局部数据区域偏移 `0x40` 的地址到 `R0`。

*要查看局部变量的实际应用，请查看[这个](sources/array_access.c)示例。*